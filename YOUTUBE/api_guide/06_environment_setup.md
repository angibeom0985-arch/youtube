# ?️ ?경 변???정?기

## ? 개요

?제 발급받? API ?들???로?트???정??차??니??
`.env` ?일???해 ?전?게 API ?? 관리하??방법???내?니??

## ? ?경 변???

?경 변?는:
- ? API ?? 비?번호 ??민감???보????
- ? 코드? 분리?여 보안 강화
- ? 배포 ?경별로 ?른 ??정 가??

## ? .env ?일 ?성

### 1?계: ?로?트 루트??.env ?일 ?성

?로?트 최상???렉?리??`.env` ?일???성?니??

```
c:\KB\Website\Youtube\
??? .env          ???기???성
??? package.json
??? README.md
??? api/
??? youtube/youtube_script/
??? ...
```

### 2?계: .env ?일 ?용 ?성

발급받? API ?에 ?라 ?음 ?플릿을 복사?여 ?성:

```env
# ===========================================
# ?수 API ??(2개만!)
# ===========================================

# 1. Gemini API (Google AI Studio)
# 발급? https://aistudio.google.com/app/apikey
# ?도: AI ???성, 분석
GEMINI_API_KEY=AIzaSy...xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# 2. Google Cloud API (Google Cloud Console)
# 발급? https://console.cloud.google.com/
# ?도: YouTube 검??+ TTS/STT (?나???로 모두 ?용)
YOUTUBE_API_KEY=AIzaSy...xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
GOOGLE_CLOUD_API_KEY=AIzaSy...xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx  # YOUTUBE_API_KEY? 같? ?

# ? ?? YOUTUBE_API_KEY? GOOGLE_CLOUD_API_KEY??같? 값을 ?력?세??


# ===========================================
# ?택 API ??(?요??경우?
# ===========================================

# Google Cloud ?비??계정 (TTS/STT 고급 ?정)
# ?비??계정 JSON ?일 경로
# GOOGLE_APPLICATION_CREDENTIALS=./gen-lang-client-xxx.json

# Groq API (콘텐??전 검?? - ?택?항
# 발급? https://console.groq.com/
# GROQ_API_KEY=gsk_...xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Supabase (?이?베?스) - ?택?항
# 발급? https://supabase.com/
# SUPABASE_URL=https://xxxxxxxxxxxxx.supabase.co
# SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# 관리자 ?증 - ?택?항
# ADMIN_USERNAME=admin
# ADMIN_PASSWORD=your_secure_password_here
# ADMIN_SESSION_SECRET=your_random_secret_here
```

### 3?계: ?제 값으?교체

???플릿에??`xxx...` 부분을 ?제 발급받? API ?로 교체?니??

#### ?시 (?제 값으?채운 모습):

```env
# ?수 API ??
GEMINI_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
YOUTUBE_API_KEY=AIzaSyYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY

# ?택 API ??(?용?는 것만 주석 ?제)
GROQ_API_KEY=gsk_ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ
```

> ?️ **주의**: ???는 ?시?니?? ?제 발급받? API ?로 교체?세??

## ??.gitignore ?정

### 중요: .env ?일??Git??커밋?? ?기

`.env` ?일?는 민감???보가 ?어?으므??? GitHub ??공개 ??소???로?하????니??

### 1?계: .gitignore ?일 ?인

?로?트 루트??`.gitignore` ?일???어 ?음 ?용???는지 ?인:

```gitignore
# Environment variables
.env
.env.local
.env.development
.env.production

# Vercel
.vercel

# API Keys
**/api-keys.json
gen-lang-client-*.json
```

### 2?계: .gitignore???다?추?

`.gitignore` ?일???다??성?고 ???용??추??니??

### 3?계: ?? 커밋??.env ?일 ?거

만약 ?수?`.env` ?일???? 커밋?다?

```bash
# Git 캐시?서 ?거 (?일? ??)
git rm --cached .env

# 변경사??커밋
git commit -m "Remove .env from git tracking"

# GitHub?서 API ???발?(보안???해 ?수!)
```

## ? .env.example ?일 ?성

?른 개발?나 미래???신???해 `.env.example` ?일???성?는 것이 좋습?다:

### 1?계: .env.example ?일 ?성

```env
# ===========================================
# ?수 API ??
# ===========================================

# Gemini API (Google AI Studio)
# 발급? https://aistudio.google.com/app/apikey
GEMINI_API_KEY=

# YouTube Data API (Google Cloud Console)
# 발급? https://console.cloud.google.com/
YOUTUBE_API_KEY=


# ===========================================
# ?택 API ??(?요??경우?
# ===========================================

# Google Cloud API (TTS/STT)
# GOOGLE_CLOUD_API_KEY=

# Groq API (콘텐??전 검??
# GROQ_API_KEY=

# Supabase (?이?베?스)
# SUPABASE_URL=
# SUPABASE_SERVICE_ROLE_KEY=

# 관리자 ?증
# ADMIN_USERNAME=
# ADMIN_PASSWORD=
# ADMIN_SESSION_SECRET=
```

### 2?계: .env.example? Git??커밋

`.env.example`? ?제 ?? ?으므?Git??커밋?도 ?전?니??

```bash
git add .env.example
git commit -m "Add .env.example template"
```

## ? ?경??정

### 개발 ?경 (로컬)

**?일**: `.env` ?는 `.env.development`

```env
# 개발??API ??
GEMINI_API_KEY=AIzaSy...개발?키...
YOUTUBE_API_KEY=AIzaSy...개발?키...

# ?버?모드
DEBUG=true
```

### ?로?션 ?경 (배포)

**Vercel 배포 ??*:

1. Vercel Dashboard ?속

2. ?로?트 ?택

3. **Settings > Environment Variables** ?릭

4. ?경 변??추?:
   - Name: `GEMINI_API_KEY`
   - Value: `AIzaSy...`
   - Environment: `Production`, `Preview`, `Development` ?택

5. ?API ?에 ???반복

**Netlify 배포 ??*:

1. Netlify Dashboard ?속

2. ?로?트 ?택

3. **Site settings > Environment variables** ?릭

4. **Add a variable** ?릭?여 추?

## ???정 ?인

### 방법 1: 콘솔 로그??인 (개발 ?

`api/test-env.ts` ?일 ?성:

```typescript
// ?경 변???인??(배포 ????)
export default function handler(req, res) {
  const hasGemini = !!process.env.GEMINI_API_KEY;
  const hasYouTube = !!process.env.YOUTUBE_API_KEY;
  const hasGroq = !!process.env.GROQ_API_KEY;
  const hasSupabase = !!process.env.SUPABASE_URL;

  res.status(200).json({
    gemini: hasGemini ? '???정?? : '???음',
    youtube: hasYouTube ? '???정?? : '???음',
    groq: hasGroq ? '???정?? : '???택?항',
    supabase: hasSupabase ? '???정?? : '???택?항',
  });
}
```

브라???서 ?속:
```
http://localhost:3000/api/test-env
```

### 방법 2: ?제 기능 ?스??

1. **?로?트 ?행**:
   ```bash
   npm run dev
   ```

2. **브라???서 ?속**:
   ```
   http://localhost:3000
   ```

3. **???성 기능 ?스??*:
   - YouTube URL ?력
   - ???성 ?릭
   - ?상 ?동 ?인

### 방법 3: ???에??직접 ?인 (PowerShell)

```powershell
# .env ?일 ?용 ?인 (?는 ??)
Get-Content .env | ForEach-Object {
    if ($_ -match '^(\w+)=(.+)$') {
        $key = $matches[1]
        $valueLength = $matches[2].Length
        Write-Host "$key = $('*' * [Math]::Min(10, $valueLength))... ($valueLength chars)"
    }
}
```

## ? 보안 모범 ??

### 1. API ???출 방?

??**?? ?? ??*:
```javascript
// ?라?언???이??JavaScript??직접 ?출
const apiKey = 'AIzaSyC1234...';  // ?험!
```

??**?바?방법**:
```javascript
// ?버 ?이?에?만 ?용
const apiKey = process.env.GEMINI_API_KEY;
```

### 2. ?경 변???근 ?한

**?라?언?에???근 가?한 변??*:
- Next.js: `NEXT_PUBLIC_` ?두???요
- Vite: `VITE_` ?두???요

```env
# ?라?언?에???근 가??(공개 가?한 ?보?
NEXT_PUBLIC_API_URL=https://api.example.com

# ?버?서??근 가??(API ????
GEMINI_API_KEY=AIzaSy...
```

### 3. API ??분리

**개발?과 ?로?션????분리**:
```env
# 개발 ?경
GEMINI_API_KEY=AIzaSy...개발??..

# ?로?션 ?경 (Vercel ?에 별도 ?정)
GEMINI_API_KEY=AIzaSy...?로?션??..
```

### 4. API ???한 ?정

- **HTTP 리퍼???한**: ?정 ?메?만 ?용 가??
- **IP 주소 ?한**: ?정 ?버 IP??용 가??
- **API 범위 ?한**: ?요??API??성??

### 5. ?기?인 ??교체

- 3~6개월마다 API ???발?
- ?히 ??서 개발?? ?사??경우 즉시 교체

## ? 문제 ?결

### "Environment variable not found" ?류

**?인**: `.env` ?일?????로드?? ?음

**?결 방법**:
1. `.env` ?일???로?트 루트???는지 ?인
2. ?일 ?름???확??`.env`?? ?인 (`.env.txt` ?이 ?님)
3. ?버 ?시?? `npm run dev` 중? ???시 ?행

### ?경 변?? undefined

**?인**: 변???름 ?? ?는 값이 ?정?? ?음

**?결 방법**:
1. `.env` ?일?서 변???름 ?인
2. 공백?나 ?옴???인:
   ```env
   # ???못????
   GEMINI_API_KEY = "AIzaSy..."
   
   # ???바???
   GEMINI_API_KEY=AIzaSy...
   ```
3. 코드?서 변???름 ?인:
   ```javascript
   process.env.GEMINI_API_KEY  // ?확???름
   ```

### Vercel 배포 ???경 변???류

**?인**: Vercel???경 변?? ?정?? ?음

**?결 방법**:
1. Vercel Dashboard > Settings > Environment Variables
2. 모든 ?수 ?경 변??추?
3. ?로?트 ?배??

### .env ?일??Git???로?됨

**?인**: `.gitignore`??`.env`가 ?음

**?결 방법**:
1. `.gitignore`??`.env` 추?
2. Git 캐시?서 ?거:
   ```bash
   git rm --cached .env
   git commit -m "Remove .env from git"
   ```
3. **즉시 API ???발?* (보안??중요!)

## ? 체크리스??

### ?정 ?료 ?인

- [ ] `.env` ?일 ?성
- [ ] ?수 API ???력 (Gemini, YouTube)
- [ ] ?택 API ???력 (?요 ??
- [ ] `.gitignore`??`.env` ?함 ?인
- [ ] `.env.example` ?일 ?성 (?택)
- [ ] 로컬?서 ?로?트 ?행 ?스??
- [ ] API ???한?항 ?정 (보안)
- [ ] Vercel/Netlify???경 변???정 (배포 ??

## ?? ?음 ?계

???경 변???정???료?었?니??

?제 ?로?트??행??준비? ?었?니??

```bash
# ?존???치
npm install

# 개발 ?버 ?행
npm run dev

# 브라???서 ?속
# http://localhost:3000
```

### 추? 가?드

- **배포 가?드**: `docs/DEPLOYMENT.md`
- **?레???스???정**: `docs/CREDITS_SYSTEM_GUIDE.md`
- **관리자 ?이지**: `docs/ADMIN_GUIDE.md`

---

? **??*: 문제가 발생?면 `.env` ?일??공백, ?옴?? 변???름??먼? ?인?세??

